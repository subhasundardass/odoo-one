<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- =========================================================
         TREE (LIST) VIEW – Customer Invoices
    ========================================================== -->
    <record id="view_accounts_invoice_tree" model="ir.ui.view">
        <field name="name">tms.invoice.tree</field>
        <field name="model">account.move</field>
        <field name="arch" type="xml">
            <tree string="Customer Invoices" default_order="invoice_date desc">
                <field name="name" />
                <field name="partner_id" />
                <field name="invoice_date" />
                <field name="invoice_date_due" />
                <field name="amount_untaxed" />
                <field name="amount_tax" />
                <field name="amount_total" />
                <field name="payment_state" />
                <field name="state" />
            </tree>
        </field>
    </record>

    <!-- =========================================================
         FORM VIEW – Inherit Standard Invoice Form
    ========================================================== -->
    <record id="view_accounts_invoice_form" model="ir.ui.view">
        <field name="name">tms.invoice.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form" />
        <field name="arch" type="xml">

            <!-- Add TMS Tab -->
            <xpath expr="//sheet/notebook" position="inside">
                <page string="TMS">
                    <group>
                        <field name="ref" />
                        <field name="invoice_origin" />
                    </group>
                </page>
            </xpath>

        </field>
    </record>

    <!-- =========================================================
         SEARCH VIEW – Invoice Filters
    ========================================================== -->
    <!-- <record id="view_accounts_invoice_search" model="ir.ui.view">
        <field name="name">tms.invoice.search</field>
        <field name="model">account.move</field>
        <field name="arch" type="xml">
            <search string="Search Invoices">

                <field name="name" />
                <field name="partner_id" />
                <field name="invoice_date" />

                <filter
                    string="Posted"
                    domain="[('state','=','posted')]" />

                <filter
                    string="Draft"
                    domain="[('state','=','draft')]" />

                <filter
                    string="Unpaid"
                    domain="[('payment_state','in',('not_paid','partial'))]" />

                <group expand="0" string="Group By">
                    <filter
                        string="Customer"
                        context="{'group_by':'partner_id'}" />
                    <filter
                        string="Invoice Date"
                        context="{'group_by':'invoice_date'}" />
                    <filter
                        string="Status"
                        context="{'group_by':'state'}" />
                </group>

            </search>
        </field>
    </record> -->

    <!-- =========================================================
         ACTION – Open Customer Invoices
    ========================================================== -->
    <record id="action_accounts_customer_invoice" model="ir.actions.act_window">
        <field name="name">Customer Invoices</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">tree,form</field>

        <field name="domain">
            [('move_type','=','out_invoice')]
        </field>

        <field name="context">
            {
            'default_move_type': 'out_invoice',
            'search_default_posted': 1
            }
        </field>

        <!-- <field name="search_view_id" ref="view_accounts_invoice_search" /> -->
    </record>


</odoo>